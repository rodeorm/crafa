DROP SCHEMA IF EXISTS msg CASCADE;
CREATE SCHEMA msg;
CREATE TABLE IF NOT EXISTS msg.AuthEmails(
ID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY 
, Queued 		BOOL
, Used 			BOOL
, UserID 		INT
, SendTime   	TIMESTAMPTZ NULL
, OTP 		    TEXT
, Email 		TEXT	
, PRIMARY KEY (ID) 
, FOREIGN KEY (UserID) REFERENCES cmn.Users(ID) DEFERRABLE
)  WITH (OIDS=FALSE, FILLFACTOR=90);

CREATE TABLE IF NOT EXISTS msg.VerifyEmails(
ID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY 
, Queued 		BOOL
, Used 			BOOL
, UserID 		INT
, SendTime   	TIMESTAMPTZ NULL
, OTP 		    TEXT
, Email 		TEXT	
, PRIMARY KEY (ID) 
, FOREIGN KEY (UserID) REFERENCES cmn.Users(ID) DEFERRABLE
)  WITH (OIDS=FALSE, FILLFACTOR=90);

CREATE TABLE IF NOT EXISTS msg.NotifyEmails(
ID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY 
, Queued 		BOOL
, Used 			BOOL
, UserID 		INT
, SendTime   	TIMESTAMPTZ NULL
, OTP 		    TEXT
, Email 		TEXT	
, PRIMARY KEY (ID) 
, FOREIGN KEY (UserID) REFERENCES cmn.Users(ID) DEFERRABLE
)  WITH (OIDS=FALSE, FILLFACTOR=90);
